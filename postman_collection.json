{"openapi":"3.1.0","info":{"title":"Bank API","description":"سیستم بانکی برای مدیریت کاربران، کارت‌ها و تراکنش‌ها","version":"1.0.0"},"paths":{"/api/v1/auth/register":{"post":{"tags":["auth"],"summary":"Register","operationId":"register_api_v1_auth_register_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserCreate"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserOut"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/auth/token":{"post":{"tags":["auth"],"summary":"Login","operationId":"login_api_v1_auth_token_post","requestBody":{"content":{"application/x-www-form-urlencoded":{"schema":{"$ref":"#/components/schemas/Body_login_api_v1_auth_token_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Token"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/auth/me":{"get":{"tags":["auth"],"summary":"Read Current User","operationId":"read_current_user_api_v1_auth_me_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserOut"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/v1/cards/":{"get":{"tags":["cards"],"summary":"List User Cards","operationId":"list_user_cards_api_v1_cards__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/CardOut-Output"},"type":"array","title":"Response List User Cards Api V1 Cards  Get"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/v1/transactions/withdraw":{"post":{"tags":["transactions"],"summary":"Withdraw","operationId":"withdraw_api_v1_transactions_withdraw_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/WithdrawIn"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TransactionOut"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/v1/transactions/transfer":{"post":{"tags":["transactions"],"summary":"Transfer","operationId":"transfer_api_v1_transactions_transfer_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TransferIn"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TransactionOut"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/v1/transactions/recent":{"get":{"tags":["transactions"],"summary":"Recent Transactions","operationId":"recent_transactions_api_v1_transactions_recent_get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":50,"exclusiveMinimum":0,"default":10,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/TransactionOut"},"title":"Response Recent Transactions Api V1 Transactions Recent Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/transactions/revenue":{"get":{"tags":["transactions"],"summary":"Get Total Revenue","operationId":"get_total_revenue_api_v1_transactions_revenue_get","parameters":[{"name":"start_date","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Start Date"}},{"name":"end_date","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"End Date"}},{"name":"transaction_id","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Transaction Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TotalRevenueResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/":{"get":{"summary":"Root","operationId":"root__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}}},"components":{"schemas":{"Body_login_api_v1_auth_token_post":{"properties":{"grant_type":{"anyOf":[{"type":"string","pattern":"^password$"},{"type":"null"}],"title":"Grant Type"},"username":{"type":"string","title":"Username"},"password":{"type":"string","format":"password","title":"Password"},"scope":{"type":"string","title":"Scope","default":""},"client_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Id"},"client_secret":{"anyOf":[{"type":"string"},{"type":"null"}],"format":"password","title":"Client Secret"}},"type":"object","required":["username","password"],"title":"Body_login_api_v1_auth_token_post"},"CardOut-Input":{"properties":{"id":{"type":"integer","title":"Id"},"card_number":{"type":"string","title":"Card Number"},"balance":{"anyOf":[{"type":"number"},{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"}],"title":"Balance"},"is_active":{"type":"boolean","title":"Is Active"},"user_id":{"type":"integer","title":"User Id"},"created_at":{"type":"string","format":"date-time","title":"Created At"}},"type":"object","required":["id","card_number","balance","is_active","user_id","created_at"],"title":"CardOut","description":"مدل داده‌ی خروجی کارت برای پاسخ API."},"CardOut-Output":{"properties":{"id":{"type":"integer","title":"Id"},"card_number":{"type":"string","title":"Card Number"},"balance":{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","title":"Balance"},"is_active":{"type":"boolean","title":"Is Active"},"user_id":{"type":"integer","title":"User Id"},"created_at":{"type":"string","format":"date-time","title":"Created At"}},"type":"object","required":["id","card_number","balance","is_active","user_id","created_at"],"title":"CardOut","description":"مدل داده‌ی خروجی کارت برای پاسخ API."},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"Token":{"properties":{"access_token":{"type":"string","title":"Access Token"},"token_type":{"type":"string","title":"Token Type","default":"bearer"}},"type":"object","required":["access_token"],"title":"Token","description":"مدل خروجی توکن JWT."},"TotalRevenueResponse":{"properties":{"total_revenue":{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","title":"Total Revenue"}},"type":"object","required":["total_revenue"],"title":"TotalRevenueResponse","description":"مدل خروجی API برای نمایش مجموع درآمد از کارمزدها."},"TransactionOut":{"properties":{"id":{"type":"integer","title":"Id"},"source_card_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Source Card Id"},"dest_card_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Dest Card Id"},"amount":{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","title":"Amount"},"fee":{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","title":"Fee"},"status":{"type":"string","title":"Status"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"created_at":{"type":"string","format":"date-time","title":"Created At"}},"type":"object","required":["id","source_card_id","dest_card_id","amount","fee","status","description","created_at"],"title":"TransactionOut","description":"مدل خروجی برای نمایش جزئیات تراکنش."},"TransferIn":{"properties":{"source_card":{"type":"string","maxLength":16,"minLength":16,"title":"Source Card","description":"شماره کارت مبدأ"},"dest_card":{"type":"string","maxLength":16,"minLength":16,"title":"Dest Card","description":"شماره کارت مقصد"},"amount":{"anyOf":[{"type":"number","exclusiveMinimum":0.0},{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d{0,2}0*$"}],"title":"Amount","description":"مبلغ انتقال (تومان)"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description","description":"توضیحات تراکنش"}},"type":"object","required":["source_card","dest_card","amount"],"title":"TransferIn","description":"مدل ورودی برای انتقال وجه بین کارت‌ها."},"UserCreate":{"properties":{"national_code":{"type":"string","maxLength":10,"minLength":10,"pattern":"^[0-9]{10}$","title":"National Code","description":"کد ملی ۱۰ رقمی"},"full_name":{"type":"string","title":"Full Name"},"phone_number":{"type":"string","title":"Phone Number"},"email":{"type":"string","format":"email","title":"Email"},"password":{"type":"string","title":"Password"}},"type":"object","required":["national_code","full_name","phone_number","email","password"],"title":"UserCreate","description":"مدل داده‌های ورودی برای ثبت‌نام کاربر جدید."},"UserOut":{"properties":{"id":{"type":"integer","title":"Id"},"national_code":{"type":"string","title":"National Code"},"full_name":{"type":"string","title":"Full Name"},"phone_number":{"type":"string","title":"Phone Number"},"email":{"type":"string","format":"email","title":"Email"},"is_active":{"type":"boolean","title":"Is Active"}},"type":"object","required":["id","national_code","full_name","phone_number","email","is_active"],"title":"UserOut","description":"مدل داده‌های خروجی کاربر (برای پاسخ API)."},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"},"WithdrawIn":{"properties":{"card_number":{"type":"string","maxLength":16,"minLength":16,"title":"Card Number","description":"شماره کارت برای برداشت"},"amount":{"anyOf":[{"type":"number","exclusiveMinimum":0.0},{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d{0,2}0*$"}],"title":"Amount","description":"مبلغ برداشت (تومان)"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description","description":"توضیحات تراکنش"}},"type":"object","required":["card_number","amount"],"title":"WithdrawIn","description":"مدل ورودی برای برداشت وجه از کارت."}},"securitySchemes":{"OAuth2PasswordBearer":{"type":"oauth2","flows":{"password":{"scopes":{},"tokenUrl":"/api/v1/auth/token"}}}}}}